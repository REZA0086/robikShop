{% extends 'parent/base.html' %}
{% block title %}صفحه اصلی{% endblock %}

{% block content %}
<section id="slider" class="mt-3">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-9" data-aos="fade-zoom-in" data-aos-duration="700">
                <div id="carouselExampleCaptions" class="carousel slide carousel-fade" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    </div>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{ media_url }}images/slider/slide1.jpg" class="d-block" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="{{ media_url }}images/slider/slide2.jpg" class="d-block" alt="...">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="col-12 col-md-3 mt-2 mt-sm-1 text-center text-sm-start" id="slider-side-banners">
                <div class="row row-cols-1 row-cols-sm-3 row-cols-md-1 h-100 gy-2 g-sm-1 g-md-0">
                    <div class="col align-self-start" data-aos="fade-top" data-aos-duration="1000">
                        <a href="./products.html">
                            <img src="{{ media_url }}images/slider/side-slide1.jpg" alt="" width="100%">
                        </a>
                    </div>
                    <div class="col align-self-center" data-aos="fade-top" data-aos-duration="1100">
                        <a href="./products.html">
                            <img src="{{ media_url }}images/slider/side-slide2.jpg" alt="" width="100%">
                        </a>
                    </div>
                    <div class="col align-self-end" data-aos="fade-top" data-aos-duration="1200">
                        <a href="./products.html">
                            <img src="{{ media_url }}images/slider/side-slide3.jpg" alt="" width="100%">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="featured-products" class="my-5">
    <div class="container">
        <!-- Tabs -->
        <div class="row pb-2 pb-sm-4">
            <div class="col-12 text-center">
                <div class="btn-group" role="group" id="featured-products-nav">
                    <h2>محصولات </h2>
                </div>
            </div>
        </div>
        <!-- /Tabs -->

        <!-- Products -->
        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-4 g-md-4 featured-product featured" data-aos="fade-up" data-aos-duration="1000">
            {% for product in products %}
            	<div class="col">
                <!-- Product Box -->
                <div class="col">
                    <!-- Product Box -->
                    <div class="encode4326654321vfb">
                        <a href="{% url 'main:product' product.id %}"><div class="image" style="background-image: url('{{ product.image.url }}')"></div></a>
                        
                        <div class="details p-3">
                            <div class="category">
                                <a href="{% url 'main:product' product.id %}">{{ product.category }}</a>
                                
                            </div>
                            <a href="{% url 'main:product' product.id %}"><h2>{{ product.name }}</h2></a>
                            <div class="encode4365gbf265g43d">{{ product.price }} تومان</div>
                        </div>
                        <input class="form-control" type="number" min="1" id="product-count" value="1">
                        <button style="color: orange;border: 1px solid black;border-radius: 10px" class="btn"  onclick="addProductToOrder({{ product.id }})">افزودن به سبد خرید</button>
                    </div>
                    <!-- /Product Box -->
                </div>
                <!-- /Product Box -->
            </div>
            {% endfor %}
            
            
            
        </div>
        <!-- /Products -->
    </div>
</section>



<section id="benefits" class="pt-4">
    <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-4 gy-3 text-center">
            <div class="col" data-aos="fade-zoom-in" data-aos-duration="800">
                <img src="{{ media_url }}images/benefits/benefit1.png" alt="">
                <span>پشتیبانی 24 ساعته</span>
            </div>
            <div class="col" data-aos="fade-zoom-in" data-aos-duration="1000">
                <img src="{{ media_url }}images/benefits/benefit2.png" alt="">
                <span>ضمانت اصالت کالا</span>
            </div>
            <div class="col" data-aos="fade-zoom-in" data-aos-duration="1200">
                <img src="{{ media_url }}images/benefits/benefit3.png" alt="">
                <span>ضمانت بازگشت وجه</span>
            </div>
            <div class="col" data-aos="fade-zoom-in" data-aos-duration="1400">
                <img src="{{ media_url }}images/benefits/benefit4.png" alt="">
                <span>ارسال سریع و رایگان</span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col">
                <hr>
            </div>
        </div>
    </div>
</section>

<section id="encode436bvf2vrf" class="pt-4">
    <h1 class="section-title">پرفروش ترین محصولات</h1>
    <div class="container pt-4">
        <!-- Tabs -->
        
        
        <!-- /Tabs -->

        <!-- Products -->
        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-4 g-md-4 most-sales-product mobile" data-aos="fade-up" data-aos-duration="1000">
            {% for product in product_sell %}
            	<div class="col">
                <!-- Product Box -->
                <div class="encode4326654321vfb">
                    <a href="{% url 'main:product' product.id %}"><div class="image" style="background-image: url('{{ product.image.url }}')"></div></a>
                    
                    <div class="details p-3">
                        <div class="category">
                            <a href="{% url 'main:product' product.id %}">{{ product.category }}</a>
                        </div>
                        <a href="./product.html"><h2>{{ product.name }}</h2></a>
                        <div class="encode4365gbf265g43d">{{ product.price }} تومان</div>
                        
                    </div>
                    <div style="color: orange;border: 1px solid black;border-radius: 10px" class="btn"  >افزودن به سبد خرید</div>
                </div>
                <!-- /Product Box -->
            </div>
            {% endfor %}
        </div>
        <!-- /Products -->
    </div>
</section>

<div class="container" data-aos="fade-up" data-aos-duration="1200">
    <div class="row">
        <div class="col-12 col-md-4 pt-2 text-center">
            <a href="./products.html">
                <img src="{{ media_url }}images/promo-image1.png" alt="">
            </a>
        </div>
        <div class="col-12 col-md-8 pt-2 text-center">
            <a href="./products.html">
                <img src="{{ media_url }}images/promo-image2.png" alt="">
            </a>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function addProductToOrder(productId, input) {
        const productCount = $('#product-count').val();
        $.get('order/orders/?product_id=' + productId + '&count=' + productCount).then(res => {
            if (res.status === 'success') {
                Swal.fire({
                    title: "Success",
                    text: "محصول با موفقیت به سبد خرید اضافه شد",
                    icon: "success"
                });
            }
            if (res.status === 'invalid_count') {
                Swal.fire({
                    title: "خطا",
                    text: "تعداد محصول وارد شده نامعتبر است",
                    icon: "error"
                });
            }
            if (res.status === 'not_found') {
                Swal.fire({
                    title: "خطا",
                    text: "محصول مورد نظر یافت نشد",
                    icon: "error"
                });
            }
            if (res.status === 'not_authenticated') {
                Swal.fire({
                    title: "خطا",
                    text: "ابتدا باید ثبت نام کنید و وارد سایت شوید",
                    icon: "error"
                });
            }
        })
    }


</script>
{% endblock %}